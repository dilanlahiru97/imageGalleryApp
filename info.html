<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Report: Cordova Image Gallery App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 
        Chosen Palette: "Code Canvas" - A calm, neutral palette for a technical report.
        Application Structure Plan: A single-page dashboard with four main sections: Overview, App Workflow, Key Functions, and UI Breakdown. This structure is designed to guide a user from a high-level understanding to a detailed code analysis. The interactive workflow diagram is the centerpiece, providing a visual map of the app's logic, which is more effective for understanding code flow than a linear report.
        Visualization & Content Choices: 
        - Report Info: The app's process flow (e.g., capture -> upload -> save -> display). Goal: Explain sequence. Method: Interactive HTML/CSS flowchart. Interaction: Clicking a node reveals a detailed explanation and the associated JavaScript code. Justification: Visual flow is easier to grasp than reading sequential functions.
        - Report Info: Individual JavaScript functions. Goal: Explain logic. Method: A grid of cards. Interaction: Clicking a card expands to show the function's commented code. Justification: Organizes complex logic into digestible pieces.
        - Report Info: The app's UI layout from index.html. Goal: Connect UI to functions. Method: A simplified, interactive recreation of the app's UI. Interaction: Clicking on a button reveals which function it triggers. Justification: Creates a clear link between the user's view and the underlying code.
        - No traditional charts like Chart.js are used as the "data" is procedural and structural, making a flowchart a more appropriate visualization.
        CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #334155; /* slate-700 */
        }
        .tab {
            transition: all 0.3s ease;
        }
        .tab-active {
            background-color: #ffffff;
            color: #4f46e5; /* indigo-600 */
            border-color: #4f46e5;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .content-panel {
            display: none;
        }
        .content-panel-active {
            display: block;
        }
        .flowchart-node {
            border: 2px solid #cbd5e1; /* slate-300 */
            background-color: #ffffff;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .flowchart-node.active {
            border-color: #4f46e5;
            box-shadow: 0 4px 14px 0 rgba(79, 70, 229, 0.2);
            transform: scale(1.05);
        }
        .flowchart-arrow {
            position: relative;
            width: 100%;
            height: 2px;
            background-color: #cbd5e1;
        }
        .flowchart-arrow::after {
            content: '';
            position: absolute;
            right: -1px;
            top: -5px;
            width: 0;
            height: 0;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-left: 8px solid #cbd5e1;
        }
        .code-card {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            height: 12rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
         .code-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .code-modal-content {
             background-color: #1e293b; /* slate-800 */
             color: #e2e8f0; /* slate-200 */
        }
        .mock-ui-element {
             cursor: pointer;
             transition: all 0.2s ease-in-out;
        }
        .mock-ui-element:hover {
            background-color: #e0e7ff; /* indigo-100 */
            transform: scale(1.05);
        }
    </style>
</head>
<body class="antialiased">

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold tracking-tight text-slate-800 sm:text-5xl">Interactive Project Report</h1>
            <p class="mt-3 text-xl text-slate-600">An Analysis of the Cordova Image Gallery App</p>
        </header>

        <!-- Navigation Tabs -->
        <div class="mb-8 border-b border-slate-200">
            <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                <button class="tab tab-active w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="overview">
                    Overview
                </button>
                <button class="tab w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="workflow">
                    App Workflow
                </button>
                <button class="tab w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="functions">
                    Key Functions
                </button>
                 <button class="tab w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="ui">
                    UI Breakdown
                </button>
            </nav>
        </div>

        <!-- Content Panels -->
        <main>
            <!-- Overview Panel -->
            <div id="panel-overview" class="content-panel content-panel-active">
                 <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Project Summary</h2>
                    <p class="text-lg text-slate-600 mb-6">
                        This application is a cross-platform mobile image gallery built with Apache Cordova. It provides a complete workflow for users to manage a cloud-based photo collection, from capturing images to uploading, viewing, and deleting them. The architecture integrates device hardware (camera, photo library) with powerful cloud services (Cloudinary for storage, Firebase for database) to create a seamless user experience. This report breaks down how these pieces fit together.
                    </p>
                     <h3 class="text-xl font-bold text-slate-800 mb-4">Technology Stack</h3>
                     <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center">
                        <div class="p-4 bg-slate-50 rounded-lg">
                            <p class="text-4xl">üì±</p><p class="font-semibold mt-2">Apache Cordova</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg">
                             <p class="text-4xl">üìÑ</p><p class="font-semibold mt-2">HTML/CSS/JS</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg">
                           <p class="text-4xl">‚òÅÔ∏è</p><p class="font-semibold mt-2">Cloudinary</p>
                        </div>
                         <div class="p-4 bg-slate-50 rounded-lg">
                           <p class="text-4xl">üî•</p><p class="font-semibold mt-2">Firebase</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg">
                           <p class="text-4xl">üîê</p><p class="font-semibold mt-2">Vercel Backend</p>
                        </div>
                     </div>
                </div>
            </div>

            <!-- Workflow Panel -->
            <div id="panel-workflow" class="content-panel">
                 <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Interactive App Workflow</h2>
                    <p class="text-lg text-slate-600 mb-8">This diagram shows the main logical flow of the application when a user adds a new image. Click on any step to see a detailed explanation and the corresponding code.</p>
                    
                    <div class="flex flex-col items-center space-y-4 md:flex-row md:space-y-0 md:space-x-4 md:justify-center">
                        <div class="flowchart-node p-4 rounded-lg w-48 text-center" data-workflow="1">
                            <p class="text-2xl">üì∑</p>
                            <p class="font-semibold">1. Capture Image</p>
                        </div>
                        <div class="w-16 h-8 md:w-24 md:h-auto flex items-center justify-center transform md:rotate-0 rotate-90">
                            <div class="flowchart-arrow"></div>
                        </div>
                        <div class="flowchart-node p-4 rounded-lg w-48 text-center" data-workflow="2">
                            <p class="text-2xl">‚¨ÜÔ∏è</p>
                            <p class="font-semibold">2. Upload to Cloud</p>
                        </div>
                         <div class="w-16 h-8 md:w-24 md:h-auto flex items-center justify-center transform md:rotate-0 rotate-90">
                            <div class="flowchart-arrow"></div>
                        </div>
                        <div class="flowchart-node p-4 rounded-lg w-48 text-center" data-workflow="3">
                            <p class="text-2xl">üíæ</p>
                            <p class="font-semibold">3. Save to Database</p>
                        </div>
                    </div>

                    <div id="workflow-details" class="mt-8 bg-slate-50 p-6 rounded-lg hidden">
                        <h3 id="workflow-title" class="text-xl font-bold text-indigo-600 mb-2"></h3>
                        <p id="workflow-description" class="text-slate-700 mb-4"></p>
                        <pre class="w-full overflow-x-auto text-sm bg-slate-800 text-white p-4 rounded-md"><code id="workflow-code"></code></pre>
                    </div>
                </div>
            </div>

            <!-- Key Functions Panel -->
            <div id="panel-functions" class="content-panel">
                <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Key Functions Deep Dive</h2>
                    <p class="text-lg text-slate-600 mb-8">The application's logic is broken down into several key functions. Click on any card to view its source code and purpose.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="onDeviceReady">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800">onDeviceReady</h3>
                                <p class="text-slate-500 mt-1">The main entry point of the app.</p>
                            </div>
                            <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="captureImage">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800">captureImage</h3>
                                <p class="text-slate-500 mt-1">Opens camera or photo library.</p>
                            </div>
                            <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="uploadToCloudinary">
                           <div>
                                <h3 class="font-bold text-lg text-slate-800">uploadToCloudinary</h3>
                                <p class="text-slate-500 mt-1">Uploads image file to the cloud.</p>
                           </div>
                           <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                         <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="saveToFirebase">
                           <div>
                                <h3 class="font-bold text-lg text-slate-800">saveToFirebase</h3>
                                <p class="text-slate-500 mt-1">Saves image URL to the database.</p>
                           </div>
                           <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                         <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="loadGallery">
                           <div>
                                <h3 class="font-bold text-lg text-slate-800">loadGallery</h3>
                                <p class="text-slate-500 mt-1">Fetches and displays all images.</p>
                           </div>
                            <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="deleteImage">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800">deleteImage</h3>
                                <p class="text-slate-500 mt-1">Deletes an image from all services.</p>
                            </div>
                             <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- UI Breakdown Panel -->
            <div id="panel-ui" class="content-panel">
                 <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Interactive UI Breakdown</h2>
                    <p class="text-lg text-slate-600 mb-8">This is a simplified replica of the app's user interface. Click on an interactive element to see which JavaScript function it triggers.</p>
                    <div class="flex justify-center items-start space-x-8">
                        <!-- Mock UI -->
                        <div class="w-full max-w-sm bg-slate-100 p-6 rounded-2xl shadow-lg border">
                             <h2 class="text-center font-bold text-lg text-indigo-600 mb-4">üì∑ Image Uploader & Gallery</h2>
                             <div class="space-y-3">
                                <button class="mock-ui-element w-full bg-blue-500 text-white py-2 px-4 rounded-md font-semibold" data-ui="pickBtn">üñºÔ∏è Pick Image</button>
                                <button class="mock-ui-element w-full bg-blue-500 text-white py-2 px-4 rounded-md font-semibold" data-ui="cameraBtn">üì∏ Take Photo</button>
                                <button class="mock-ui-element w-full bg-blue-500 text-white py-2 px-4 rounded-md font-semibold" data-ui="loadGallery">üîÑ Load Gallery</button>
                             </div>
                             <div class="mt-6 bg-slate-200 p-4 rounded-md min-h-[100px]">
                                 <p class="text-center text-slate-500">Gallery Area</p>
                             </div>
                        </div>
                        <!-- Info Display -->
                        <div id="ui-info" class="w-full max-w-sm bg-slate-50 p-6 rounded-lg hidden">
                            <h3 class="font-bold text-lg text-slate-800">Element Information</h3>
                             <p class="mt-2"><b>HTML ID:</b> <code id="ui-info-id" class="text-sm bg-slate-200 p-1 rounded"></code></p>
                             <p class="mt-1"><b>Triggers Function:</b> <code id="ui-info-func" class="text-sm bg-slate-200 p-1 rounded"></code></p>
                             <p id="ui-info-desc" class="mt-4 text-slate-600"></p>
                        </div>
                    </div>
                 </div>
            </div>
        </main>
    </div>

    <!-- Code Viewer Modal -->
    <div id="code-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden items-center justify-center p-4">
        <div class="relative bg-white w-full max-w-4xl max-h-[90vh] rounded-xl shadow-2xl flex flex-col">
            <div class="p-6 border-b">
                 <h3 id="modal-title" class="text-2xl font-bold text-slate-800"></h3>
                 <p id="modal-description" class="text-slate-600 mt-1"></p>
            </div>
            <div class="p-6 overflow-y-auto">
                <pre class="code-modal-content p-4 rounded-md text-sm"><code id="modal-code"></code></pre>
            </div>
             <button id="modal-close" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800 text-2xl font-bold">&times;</button>
        </div>
    </div>
    
    <script>
        const appData = {
            functions: {
                onDeviceReady: {
                    title: 'onDeviceReady()',
                    description: "This is the app's main entry point. It runs only after Cordova's device APIs are loaded and ready. It initializes Firebase and attaches click event listeners to the main buttons.",
                    code: `function onDeviceReady() {
  console.log('Cordova is ready and device features can be used.');
  checkAndRequestStoragePermission();

  const firebaseConfig = { /* ... keys ... */ };

  firebase.initializeApp(firebaseConfig);
  console.log('Firebase initialized.');

  document.getElementById('pickBtn').addEventListener('click', () => captureImage(Camera.PictureSourceType.PHOTOLIBRARY));
  document.getElementById('cameraBtn').addEventListener('click', () => captureImage(Camera.PictureSourceType.CAMERA));
  document.getElementById('loadGallery').addEventListener('click', loadGallery);
}`
                },
                captureImage: {
                    title: 'captureImage()',
                    description: 'This function uses the Cordova Camera plugin to open either the photo library or the camera. On success, it receives the image data as a base64 string and passes it to the upload function.',
                    code: `function captureImage(sourceType) {
  if (!navigator.camera) {
    alert("Camera plugin is not available.");
    return;
  }
  navigator.camera.getPicture(onSuccess, onFail, {
    quality: 80,
    destinationType: Camera.DestinationType.DATA_URL,
    sourceType: sourceType,
    encodingType: Camera.EncodingType.JPEG,
    targetWidth: 1200,
    targetHeight: 1200,
    correctOrientation: true
  });

  function onSuccess(imageData) {
    const base64Img = "data:image/jpeg;base64," + imageData;
    uploadToCloudinary(base64Img);
  }

  function onFail(message) { /* ... */ }
}`
                },
                uploadToCloudinary: {
                    title: 'uploadToCloudinary()',
                    description: 'This function takes the base64 image data, constructs a FormData object, and uses fetch() to send a POST request to the Cloudinary API endpoint to upload the file.',
                    code: `function uploadToCloudinary(base64Image) {
  console.log('Starting upload to Cloudinary...');
  const data = new FormData();
  data.append('file', base64Image);
  data.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);

  fetch(CLOUDINARY_URL, {
    method: 'POST',
    body: data
  })
  .then(response => response.json())
  .then(data => {
    if (data.secure_url && data.public_id) {
      saveToFirebase(data.secure_url, data.public_id);
      alert("‚úÖ Image uploaded successfully!");
    } else { /* ... */ }
  })
  .catch(err => { /* ... */ });
}`
                },
                saveToFirebase: {
                    title: 'saveToFirebase()',
                    description: 'After a successful upload to Cloudinary, this function takes the image URL and public ID and saves them as a new record in the Firebase Realtime Database under the "images" node.',
                    code: `function saveToFirebase(imageUrl, publicId) {
  console.log('Saving image reference to Firebase...');
  const db = firebase.database();
  const imagesRef = db.ref('images');
  imagesRef.push({
    url: imageUrl,
    public_id: publicId,
    timestamp: firebase.database.ServerValue.TIMESTAMP
  })
  .then(() => {
    console.log('Image reference saved to Firebase.');
  })
  .catch(error => { /* ... */ });
}`
                },
                loadGallery: {
                    title: 'loadGallery()',
                    description: 'This function fetches all image records from Firebase. It then dynamically creates HTML elements (image, delete button, download button) for each record and injects them into the gallery div.',
                    code: `function loadGallery() {
  console.log('Loading gallery from Firebase...');
  const galleryElement = document.getElementById('gallery');
  galleryElement.innerHTML = '<p>Loading images...</p>';

  const db = firebase.database();
  const imagesRef = db.ref('images');

  imagesRef.once('value', snapshot => {
    galleryElement.innerHTML = '';
    if (!snapshot.exists()) { /* ... */ }

    snapshot.forEach(childSnapshot => {
      const imageKey = childSnapshot.key;
      const imageData = childSnapshot.val();

      const wrapper = document.createElement('div');
      /* ... create and append img, delete, and download buttons ... */
      galleryElement.appendChild(wrapper);
    });
  }, error => { /* ... */ });
}`
                },
                deleteImage: {
                    title: 'deleteImage()',
                    description: 'This function first removes the image record from Firebase. Then, to securely delete the file from Cloudinary, it sends a request to a backend server (a Vercel function) which holds the secret API key.',
                    code: `function deleteImage(firebaseKey, publicId) {
  if (!confirm('Are you sure you want to delete this image?')) {
    return;
  }
  const db = firebase.database();
  // 1. Remove from Firebase
  db.ref('images/' + firebaseKey).remove()
    .then(() => {
      // 2. Send request to Vercel API to remove from Cloudinary
      return fetch('https://cloudinary-delete-api-1.vercel.app/api/delete-image', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ public_id: publicId })
      });
    })
    .then(response => response.json())
    .then(result => {
       /* ... handle success ... */
      loadGallery(); // Refresh the gallery
    })
    .catch(err => { /* ... */ });
}`
                }
            },
            workflow: {
                 "1": {
                    title: 'Step 1: Capture Image',
                    description: 'The user initiates the process by clicking either "Pick Image" or "Take Photo". This triggers the `captureImage()` function, which uses the Cordova Camera plugin to get an image as a base64-encoded string.',
                    code: `function captureImage(sourceType) {
  navigator.camera.getPicture(onSuccess, onFail, {
    destinationType: Camera.DestinationType.DATA_URL,
    sourceType: sourceType,
    //...
  });

  function onSuccess(imageData) {
    const base64Img = "data:image/jpeg;base64," + imageData;
    uploadToCloudinary(base64Img); // Next step
  }
}`
                },
                 "2": {
                    title: 'Step 2: Upload to Cloudinary',
                    description: 'The `uploadToCloudinary()` function receives the image data. It sends this data via a POST request to the Cloudinary API. Cloudinary stores the image and returns a secure URL and a public ID.',
                    code: `function uploadToCloudinary(base64Image) {
  const data = new FormData();
  data.append('file', base64Image);
  data.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);

  fetch(CLOUDINARY_URL, { /* ... */ })
  .then(response => response.json())
  .then(data => {
    // Pass results to the next step
    saveToFirebase(data.secure_url, data.public_id);
  });
}`
                },
                 "3": {
                    title: 'Step 3: Save Reference to Firebase',
                    description: "The final step in the upload process. The `saveToFirebase()` function takes the URL and public ID from Cloudinary and saves them as a new entry in the Firebase Realtime Database. The app's gallery is then populated by reading from this database.",
                    code: `function saveToFirebase(imageUrl, publicId) {
  const db = firebase.database();
  const imagesRef = db.ref('images');
  imagesRef.push({
    url: imageUrl,
    public_id: publicId,
    timestamp: firebase.database.ServerValue.TIMESTAMP
  });
}`
                }
            },
            ui: {
                pickBtn: {
                    id: 'pickBtn',
                    func: 'captureImage()',
                    desc: 'This button opens the device\'s photo library, allowing the user to select an existing image.'
                },
                cameraBtn: {
                    id: 'cameraBtn',
                    func: 'captureImage()',
                    desc: 'This button launches the device\'s native camera interface to take a new photo.'
                },
                loadGallery: {
                    id: 'loadGallery',
                    func: 'loadGallery()',
                    desc: 'This button manually triggers a refresh of the gallery, fetching the latest list of images from Firebase.'
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            // Tab Navigation
            const tabs = document.querySelectorAll('.tab');
            const panels = document.querySelectorAll('.content-panel');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('tab-active'));
                    tab.classList.add('tab-active');

                    const targetPanelId = 'panel-' + tab.dataset.tab;
                    panels.forEach(panel => {
                        panel.style.display = (panel.id === targetPanelId) ? 'block' : 'none';
                    });
                });
            });

            // Workflow Interaction
            const flowchartNodes = document.querySelectorAll('.flowchart-node');
            const workflowDetails = document.getElementById('workflow-details');
            const workflowTitle = document.getElementById('workflow-title');
            const workflowDescription = document.getElementById('workflow-description');
            const workflowCode = document.getElementById('workflow-code');

            flowchartNodes.forEach(node => {
                node.addEventListener('click', () => {
                    flowchartNodes.forEach(n => n.classList.remove('active'));
                    node.classList.add('active');
                    
                    const workflowData = appData.workflow[node.dataset.workflow];
                    workflowTitle.textContent = workflowData.title;
                    workflowDescription.textContent = workflowData.description;
                    workflowCode.textContent = workflowData.code;
                    workflowDetails.style.display = 'block';
                });
            });
            
            // Key Functions Modal Interaction
            const codeCards = document.querySelectorAll('.code-card');
            const codeModal = document.getElementById('code-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalDescription = document.getElementById('modal-description');
            const modalCode = document.getElementById('modal-code');
            const modalClose = document.getElementById('modal-close');

            codeCards.forEach(card => {
                card.addEventListener('click', () => {
                    const funcData = appData.functions[card.dataset.function];
                    modalTitle.textContent = funcData.title;
                    modalDescription.textContent = funcData.description;
                    modalCode.textContent = funcData.code;
                    codeModal.style.display = 'flex';
                });
            });
            
            const closeCodeModal = () => codeModal.style.display = 'none';
            modalClose.addEventListener('click', closeCodeModal);
            codeModal.addEventListener('click', (e) => {
                if (e.target === codeModal) closeCodeModal();
            });

            // UI Breakdown Interaction
            const uiElements = document.querySelectorAll('.mock-ui-element');
            const uiInfoPanel = document.getElementById('ui-info');
            const uiInfoId = document.getElementById('ui-info-id');
            const uiInfoFunc = document.getElementById('ui-info-func');
            const uiInfoDesc = document.getElementById('ui-info-desc');

             uiElements.forEach(el => {
                el.addEventListener('click', () => {
                    const uiData = appData.ui[el.dataset.ui];
                    uiInfoId.textContent = uiData.id;
                    uiInfoFunc.textContent = uiData.func;
                    uiInfoDesc.textContent = uiData.desc;
                    uiInfoPanel.style.display = 'block';
                });
             });
        });
    </script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Report: Cordova Image Gallery App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 
        Chosen Palette: "Code Canvas" - A calm, neutral palette for a technical report.
        Application Structure Plan: A single-page dashboard with four main sections: Overview, App Workflow, Key Functions, and UI Breakdown. This structure is designed to guide a user from a high-level understanding to a detailed code analysis. The interactive workflow diagram is the centerpiece, providing a visual map of the app's logic, which is more effective for understanding code flow than a linear report.
        Visualization & Content Choices: 
        - Report Info: The app's process flow (e.g., capture -> upload -> save -> display). Goal: Explain sequence. Method: Interactive HTML/CSS flowchart. Interaction: Clicking a node reveals a detailed explanation and the associated JavaScript code. Justification: Visual flow is easier to grasp than reading sequential functions.
        - Report Info: Individual JavaScript functions. Goal: Explain logic. Method: A grid of cards. Interaction: Clicking a card expands to show the function's commented code. Justification: Organizes complex logic into digestible pieces.
        - Report Info: The app's UI layout from index.html. Goal: Connect UI to functions. Method: A simplified, interactive recreation of the app's UI. Interaction: Clicking on a button reveals which function it triggers. Justification: Creates a clear link between the user's view and the underlying code.
        - No traditional charts like Chart.js are used as the "data" is procedural and structural, making a flowchart a more appropriate visualization.
        CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #334155; /* slate-700 */
        }
        .tab {
            transition: all 0.3s ease;
        }
        .tab-active {
            background-color: #ffffff;
            color: #4f46e5; /* indigo-600 */
            border-color: #4f46e5;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .content-panel {
            display: none;
        }
        .content-panel-active {
            display: block;
        }
        .flowchart-node {
            border: 2px solid #cbd5e1; /* slate-300 */
            background-color: #ffffff;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .flowchart-node.active {
            border-color: #4f46e5;
            box-shadow: 0 4px 14px 0 rgba(79, 70, 229, 0.2);
            transform: scale(1.05);
        }
        .flowchart-arrow {
            position: relative;
            width: 100%;
            height: 2px;
            background-color: #cbd5e1;
        }
        .flowchart-arrow::after {
            content: '';
            position: absolute;
            right: -1px;
            top: -5px;
            width: 0;
            height: 0;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-left: 8px solid #cbd5e1;
        }
        .code-card {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            height: 12rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
         .code-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .code-modal-content {
             background-color: #1e293b; /* slate-800 */
             color: #e2e8f0; /* slate-200 */
        }
        .mock-ui-element {
             cursor: pointer;
             transition: all 0.2s ease-in-out;
        }
        .mock-ui-element:hover {
            background-color: #e0e7ff; /* indigo-100 */
            transform: scale(1.05);
        }
    </style>
</head>
<body class="antialiased">

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold tracking-tight text-slate-800 sm:text-5xl">Interactive Project Report</h1>
            <p class="mt-3 text-xl text-slate-600">An Analysis of the Cordova Image Gallery App</p>
        </header>

        <!-- Navigation Tabs -->
        <div class="mb-8 border-b border-slate-200">
            <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                <button class="tab tab-active w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="overview">
                    Overview
                </button>
                <button class="tab w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="workflow">
                    App Workflow
                </button>
                <button class="tab w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="functions">
                    Key Functions
                </button>
                 <button class="tab w-full sm:w-auto text-center border-b-2 font-medium text-lg py-4 px-6 border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tab="ui">
                    UI Breakdown
                </button>
            </nav>
        </div>

        <!-- Content Panels -->
        <main>
            <!-- Overview Panel -->
            <div id="panel-overview" class="content-panel content-panel-active">
                 <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Project Summary</h2>
                    <p class="text-lg text-slate-600 mb-6">
                        This application is a cross-platform mobile image gallery built with Apache Cordova. It provides a complete workflow for users to manage a cloud-based photo collection, from capturing images to uploading, viewing, and deleting them. The architecture integrates device hardware (camera, photo library) with powerful cloud services (Cloudinary for storage, Firebase for database) to create a seamless user experience. This report breaks down how these pieces fit together.
                    </p>
                     <h3 class="text-xl font-bold text-slate-800 mb-4">Technology Stack</h3>
                     <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center">
                        <div class="p-4 bg-slate-50 rounded-lg">
                            <p class="text-4xl">üì±</p><p class="font-semibold mt-2">Apache Cordova</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg">
                             <p class="text-4xl">üìÑ</p><p class="font-semibold mt-2">HTML/CSS/JS</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg">
                           <p class="text-4xl">‚òÅÔ∏è</p><p class="font-semibold mt-2">Cloudinary</p>
                        </div>
                         <div class="p-4 bg-slate-50 rounded-lg">
                           <p class="text-4xl">üî•</p><p class="font-semibold mt-2">Firebase</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg">
                           <p class="text-4xl">üîê</p><p class="font-semibold mt-2">Vercel Backend</p>
                        </div>
                     </div>
                </div>
            </div>

            <!-- Workflow Panel -->
            <div id="panel-workflow" class="content-panel">
                 <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Interactive App Workflow</h2>
                    <p class="text-lg text-slate-600 mb-8">This diagram shows the main logical flow of the application when a user adds a new image. Click on any step to see a detailed explanation and the corresponding code.</p>
                    
                    <div class="flex flex-col items-center space-y-4 md:flex-row md:space-y-0 md:space-x-4 md:justify-center">
                        <div class="flowchart-node p-4 rounded-lg w-48 text-center" data-workflow="1">
                            <p class="text-2xl">üì∑</p>
                            <p class="font-semibold">1. Capture Image</p>
                        </div>
                        <div class="w-16 h-8 md:w-24 md:h-auto flex items-center justify-center transform md:rotate-0 rotate-90">
                            <div class="flowchart-arrow"></div>
                        </div>
                        <div class="flowchart-node p-4 rounded-lg w-48 text-center" data-workflow="2">
                            <p class="text-2xl">‚¨ÜÔ∏è</p>
                            <p class="font-semibold">2. Upload to Cloud</p>
                        </div>
                         <div class="w-16 h-8 md:w-24 md:h-auto flex items-center justify-center transform md:rotate-0 rotate-90">
                            <div class="flowchart-arrow"></div>
                        </div>
                        <div class="flowchart-node p-4 rounded-lg w-48 text-center" data-workflow="3">
                            <p class="text-2xl">üíæ</p>
                            <p class="font-semibold">3. Save to Database</p>
                        </div>
                    </div>

                    <div id="workflow-details" class="mt-8 bg-slate-50 p-6 rounded-lg hidden">
                        <h3 id="workflow-title" class="text-xl font-bold text-indigo-600 mb-2"></h3>
                        <p id="workflow-description" class="text-slate-700 mb-4"></p>
                        <pre class="w-full overflow-x-auto text-sm bg-slate-800 text-white p-4 rounded-md"><code id="workflow-code"></code></pre>
                    </div>
                </div>
            </div>

            <!-- Key Functions Panel -->
            <div id="panel-functions" class="content-panel">
                <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Key Functions Deep Dive</h2>
                    <p class="text-lg text-slate-600 mb-8">The application's logic is broken down into several key functions. Click on any card to view its source code and purpose.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="onDeviceReady">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800">onDeviceReady</h3>
                                <p class="text-slate-500 mt-1">The main entry point of the app.</p>
                            </div>
                            <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="captureImage">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800">captureImage</h3>
                                <p class="text-slate-500 mt-1">Opens camera or photo library.</p>
                            </div>
                            <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="uploadToCloudinary">
                           <div>
                                <h3 class="font-bold text-lg text-slate-800">uploadToCloudinary</h3>
                                <p class="text-slate-500 mt-1">Uploads image file to the cloud.</p>
                           </div>
                           <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                         <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="saveToFirebase">
                           <div>
                                <h3 class="font-bold text-lg text-slate-800">saveToFirebase</h3>
                                <p class="text-slate-500 mt-1">Saves image URL to the database.</p>
                           </div>
                           <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                         <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="loadGallery">
                           <div>
                                <h3 class="font-bold text-lg text-slate-800">loadGallery</h3>
                                <p class="text-slate-500 mt-1">Fetches and displays all images.</p>
                           </div>
                            <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                        <div class="code-card bg-white p-6 rounded-lg shadow-sm border border-slate-200" data-function="deleteImage">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800">deleteImage</h3>
                                <p class="text-slate-500 mt-1">Deletes an image from all services.</p>
                            </div>
                             <span class="text-indigo-600 font-semibold self-start">View Code ‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- UI Breakdown Panel -->
            <div id="panel-ui" class="content-panel">
                 <div class="bg-white p-8 rounded-xl shadow-sm">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Interactive UI Breakdown</h2>
                    <p class="text-lg text-slate-600 mb-8">This is a simplified replica of the app's user interface. Click on an interactive element to see which JavaScript function it triggers.</p>
                    <div class="flex justify-center items-start space-x-8">
                        <!-- Mock UI -->
                        <div class="w-full max-w-sm bg-slate-100 p-6 rounded-2xl shadow-lg border">
                             <h2 class="text-center font-bold text-lg text-indigo-600 mb-4">üì∑ Image Uploader & Gallery</h2>
                             <div class="space-y-3">
                                <button class="mock-ui-element w-full bg-blue-500 text-white py-2 px-4 rounded-md font-semibold" data-ui="pickBtn">üñºÔ∏è Pick Image</button>
                                <button class="mock-ui-element w-full bg-blue-500 text-white py-2 px-4 rounded-md font-semibold" data-ui="cameraBtn">üì∏ Take Photo</button>
                                <button class="mock-ui-element w-full bg-blue-500 text-white py-2 px-4 rounded-md font-semibold" data-ui="loadGallery">üîÑ Load Gallery</button>
                             </div>
                             <div class="mt-6 bg-slate-200 p-4 rounded-md min-h-[100px]">
                                 <p class="text-center text-slate-500">Gallery Area</p>
                             </div>
                        </div>
                        <!-- Info Display -->
                        <div id="ui-info" class="w-full max-w-sm bg-slate-50 p-6 rounded-lg hidden">
                            <h3 class="font-bold text-lg text-slate-800">Element Information</h3>
                             <p class="mt-2"><b>HTML ID:</b> <code id="ui-info-id" class="text-sm bg-slate-200 p-1 rounded"></code></p>
                             <p class="mt-1"><b>Triggers Function:</b> <code id="ui-info-func" class="text-sm bg-slate-200 p-1 rounded"></code></p>
                             <p id="ui-info-desc" class="mt-4 text-slate-600"></p>
                        </div>
                    </div>
                 </div>
            </div>
        </main>
    </div>

    <!-- Code Viewer Modal -->
    <div id="code-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden items-center justify-center p-4">
        <div class="relative bg-white w-full max-w-4xl max-h-[90vh] rounded-xl shadow-2xl flex flex-col">
            <div class="p-6 border-b">
                 <h3 id="modal-title" class="text-2xl font-bold text-slate-800"></h3>
                 <p id="modal-description" class="text-slate-600 mt-1"></p>
            </div>
            <div class="p-6 overflow-y-auto">
                <pre class="code-modal-content p-4 rounded-md text-sm"><code id="modal-code"></code></pre>
            </div>
             <button id="modal-close" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800 text-2xl font-bold">&times;</button>
        </div>
    </div>
    
    <script>
        const appData = {
            functions: {
                onDeviceReady: {
                    title: 'onDeviceReady()',
                    description: "This is the app's main entry point. It runs only after Cordova's device APIs are loaded and ready. It initializes Firebase and attaches click event listeners to the main buttons.",
                    code: `function onDeviceReady() {
  console.log('Cordova is ready and device features can be used.');
  checkAndRequestStoragePermission();

  const firebaseConfig = { /* ... keys ... */ };

  firebase.initializeApp(firebaseConfig);
  console.log('Firebase initialized.');

  document.getElementById('pickBtn').addEventListener('click', () => captureImage(Camera.PictureSourceType.PHOTOLIBRARY));
  document.getElementById('cameraBtn').addEventListener('click', () => captureImage(Camera.PictureSourceType.CAMERA));
  document.getElementById('loadGallery').addEventListener('click', loadGallery);
}`
                },
                captureImage: {
                    title: 'captureImage()',
                    description: 'This function uses the Cordova Camera plugin to open either the photo library or the camera. On success, it receives the image data as a base64 string and passes it to the upload function.',
                    code: `function captureImage(sourceType) {
  if (!navigator.camera) {
    alert("Camera plugin is not available.");
    return;
  }
  navigator.camera.getPicture(onSuccess, onFail, {
    quality: 80,
    destinationType: Camera.DestinationType.DATA_URL,
    sourceType: sourceType,
    encodingType: Camera.EncodingType.JPEG,
    targetWidth: 1200,
    targetHeight: 1200,
    correctOrientation: true
  });

  function onSuccess(imageData) {
    const base64Img = "data:image/jpeg;base64," + imageData;
    uploadToCloudinary(base64Img);
  }

  function onFail(message) { /* ... */ }
}`
                },
                uploadToCloudinary: {
                    title: 'uploadToCloudinary()',
                    description: 'This function takes the base64 image data, constructs a FormData object, and uses fetch() to send a POST request to the Cloudinary API endpoint to upload the file.',
                    code: `function uploadToCloudinary(base64Image) {
  console.log('Starting upload to Cloudinary...');
  const data = new FormData();
  data.append('file', base64Image);
  data.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);

  fetch(CLOUDINARY_URL, {
    method: 'POST',
    body: data
  })
  .then(response => response.json())
  .then(data => {
    if (data.secure_url && data.public_id) {
      saveToFirebase(data.secure_url, data.public_id);
      alert("‚úÖ Image uploaded successfully!");
    } else { /* ... */ }
  })
  .catch(err => { /* ... */ });
}`
                },
                saveToFirebase: {
                    title: 'saveToFirebase()',
                    description: 'After a successful upload to Cloudinary, this function takes the image URL and public ID and saves them as a new record in the Firebase Realtime Database under the "images" node.',
                    code: `function saveToFirebase(imageUrl, publicId) {
  console.log('Saving image reference to Firebase...');
  const db = firebase.database();
  const imagesRef = db.ref('images');
  imagesRef.push({
    url: imageUrl,
    public_id: publicId,
    timestamp: firebase.database.ServerValue.TIMESTAMP
  })
  .then(() => {
    console.log('Image reference saved to Firebase.');
  })
  .catch(error => { /* ... */ });
}`
                },
                loadGallery: {
                    title: 'loadGallery()',
                    description: 'This function fetches all image records from Firebase. It then dynamically creates HTML elements (image, delete button, download button) for each record and injects them into the gallery div.',
                    code: `function loadGallery() {
  console.log('Loading gallery from Firebase...');
  const galleryElement = document.getElementById('gallery');
  galleryElement.innerHTML = '<p>Loading images...</p>';

  const db = firebase.database();
  const imagesRef = db.ref('images');

  imagesRef.once('value', snapshot => {
    galleryElement.innerHTML = '';
    if (!snapshot.exists()) { /* ... */ }

    snapshot.forEach(childSnapshot => {
      const imageKey = childSnapshot.key;
      const imageData = childSnapshot.val();

      const wrapper = document.createElement('div');
      /* ... create and append img, delete, and download buttons ... */
      galleryElement.appendChild(wrapper);
    });
  }, error => { /* ... */ });
}`
                },
                deleteImage: {
                    title: 'deleteImage()',
                    description: 'This function first removes the image record from Firebase. Then, to securely delete the file from Cloudinary, it sends a request to a backend server (a Vercel function) which holds the secret API key.',
                    code: `function deleteImage(firebaseKey, publicId) {
  if (!confirm('Are you sure you want to delete this image?')) {
    return;
  }
  const db = firebase.database();
  // 1. Remove from Firebase
  db.ref('images/' + firebaseKey).remove()
    .then(() => {
      // 2. Send request to Vercel API to remove from Cloudinary
      return fetch('https://cloudinary-delete-api-1.vercel.app/api/delete-image', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ public_id: publicId })
      });
    })
    .then(response => response.json())
    .then(result => {
       /* ... handle success ... */
      loadGallery(); // Refresh the gallery
    })
    .catch(err => { /* ... */ });
}`
                }
            },
            workflow: {
                 "1": {
                    title: 'Step 1: Capture Image',
                    description: 'The user initiates the process by clicking either "Pick Image" or "Take Photo". This triggers the `captureImage()` function, which uses the Cordova Camera plugin to get an image as a base64-encoded string.',
                    code: `function captureImage(sourceType) {
  navigator.camera.getPicture(onSuccess, onFail, {
    destinationType: Camera.DestinationType.DATA_URL,
    sourceType: sourceType,
    //...
  });

  function onSuccess(imageData) {
    const base64Img = "data:image/jpeg;base64," + imageData;
    uploadToCloudinary(base64Img); // Next step
  }
}`
                },
                 "2": {
                    title: 'Step 2: Upload to Cloudinary',
                    description: 'The `uploadToCloudinary()` function receives the image data. It sends this data via a POST request to the Cloudinary API. Cloudinary stores the image and returns a secure URL and a public ID.',
                    code: `function uploadToCloudinary(base64Image) {
  const data = new FormData();
  data.append('file', base64Image);
  data.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);

  fetch(CLOUDINARY_URL, { /* ... */ })
  .then(response => response.json())
  .then(data => {
    // Pass results to the next step
    saveToFirebase(data.secure_url, data.public_id);
  });
}`
                },
                 "3": {
                    title: 'Step 3: Save Reference to Firebase',
                    description: "The final step in the upload process. The `saveToFirebase()` function takes the URL and public ID from Cloudinary and saves them as a new entry in the Firebase Realtime Database. The app's gallery is then populated by reading from this database.",
                    code: `function saveToFirebase(imageUrl, publicId) {
  const db = firebase.database();
  const imagesRef = db.ref('images');
  imagesRef.push({
    url: imageUrl,
    public_id: publicId,
    timestamp: firebase.database.ServerValue.TIMESTAMP
  });
}`
                }
            },
            ui: {
                pickBtn: {
                    id: 'pickBtn',
                    func: 'captureImage()',
                    desc: 'This button opens the device\'s photo library, allowing the user to select an existing image.'
                },
                cameraBtn: {
                    id: 'cameraBtn',
                    func: 'captureImage()',
                    desc: 'This button launches the device\'s native camera interface to take a new photo.'
                },
                loadGallery: {
                    id: 'loadGallery',
                    func: 'loadGallery()',
                    desc: 'This button manually triggers a refresh of the gallery, fetching the latest list of images from Firebase.'
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            // Tab Navigation
            const tabs = document.querySelectorAll('.tab');
            const panels = document.querySelectorAll('.content-panel');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('tab-active'));
                    tab.classList.add('tab-active');

                    const targetPanelId = 'panel-' + tab.dataset.tab;
                    panels.forEach(panel => {
                        panel.style.display = (panel.id === targetPanelId) ? 'block' : 'none';
                    });
                });
            });

            // Workflow Interaction
            const flowchartNodes = document.querySelectorAll('.flowchart-node');
            const workflowDetails = document.getElementById('workflow-details');
            const workflowTitle = document.getElementById('workflow-title');
            const workflowDescription = document.getElementById('workflow-description');
            const workflowCode = document.getElementById('workflow-code');

            flowchartNodes.forEach(node => {
                node.addEventListener('click', () => {
                    flowchartNodes.forEach(n => n.classList.remove('active'));
                    node.classList.add('active');
                    
                    const workflowData = appData.workflow[node.dataset.workflow];
                    workflowTitle.textContent = workflowData.title;
                    workflowDescription.textContent = workflowData.description;
                    workflowCode.textContent = workflowData.code;
                    workflowDetails.style.display = 'block';
                });
            });
            
            // Key Functions Modal Interaction
            const codeCards = document.querySelectorAll('.code-card');
            const codeModal = document.getElementById('code-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalDescription = document.getElementById('modal-description');
            const modalCode = document.getElementById('modal-code');
            const modalClose = document.getElementById('modal-close');

            codeCards.forEach(card => {
                card.addEventListener('click', () => {
                    const funcData = appData.functions[card.dataset.function];
                    modalTitle.textContent = funcData.title;
                    modalDescription.textContent = funcData.description;
                    modalCode.textContent = funcData.code;
                    codeModal.style.display = 'flex';
                });
            });
            
            const closeCodeModal = () => codeModal.style.display = 'none';
            modalClose.addEventListener('click', closeCodeModal);
            codeModal.addEventListener('click', (e) => {
                if (e.target === codeModal) closeCodeModal();
            });

            // UI Breakdown Interaction
            const uiElements = document.querySelectorAll('.mock-ui-element');
            const uiInfoPanel = document.getElementById('ui-info');
            const uiInfoId = document.getElementById('ui-info-id');
            const uiInfoFunc = document.getElementById('ui-info-func');
            const uiInfoDesc = document.getElementById('ui-info-desc');

             uiElements.forEach(el => {
                el.addEventListener('click', () => {
                    const uiData = appData.ui[el.dataset.ui];
                    uiInfoId.textContent = uiData.id;
                    uiInfoFunc.textContent = uiData.func;
                    uiInfoDesc.textContent = uiData.desc;
                    uiInfoPanel.style.display = 'block';
                });
             });
        });
    </script>

</body>
</html>
